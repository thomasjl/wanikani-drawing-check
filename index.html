<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kanji Write Check ‚Äî WaniKani (v2)</title>
  <style>
    :root { color-scheme: light dark; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans JP", Arial, sans-serif; margin: 2rem; }
    header { display:flex; gap:1rem; flex-wrap:wrap; align-items:flex-end; }
    input[type="text"], select { padding:.5rem; font-size:1rem; }
    button { padding:.6rem 1rem; font-size:1rem; margin-right:.5rem; cursor:pointer; }
    .card { border:1px solid #8883; border-radius:12px; padding:1rem; margin-top:1rem; }
    .label { font-size:.9rem; color:#666; }
    .meaning { font-size:1.4rem; }
    .kanji { font-size:4rem; line-height:1.2; margin-top:.25rem; display:none; }
    .readings { font-size:1rem; color:#555; display:none; }
    .controls { margin-top:1rem; }
    .stats { margin-top:.75rem; color:#444; }
    .hint { font-size:.85rem; color:#666; margin-top:.5rem; }
    .error { color:#b00020; white-space:pre-wrap; }
    details { margin-top:1rem; }
    summary { cursor:pointer; }
    .diag-grid { display:grid; grid-template-columns: 220px 1fr; gap:.25rem .75rem; }
    .diag-grid div:nth-child(odd) { color:#666; }
    code { background:#0001; padding:.05rem .25rem; border-radius:4px; }
  </style>
</head>
<body>
<header>
  <div>
    <div class="label">Token WaniKani (lecture seule)</div>
    <input id="token" type="text" size="48" value="09c154e9-8a05-4c21-a1f2-6196196c1be1" />
    <button id="saveToken">Enregistrer</button>
  </div>
  <div>
    <div class="label">S√©lection</div>
    <select id="mode">
      <option value="now">Kanji √† r√©viser maintenant</option>
      <option value="unlocked">Tous les kanji d√©bloqu√©s (non br√ªl√©s)</option>
      <option value="level">Kanji d‚Äôun niveau pr√©cis‚Ä¶</option>
    </select>
    <input id="level" type="number" min="1" max="60" placeholder="lvl" style="width:5rem; display:none;" />
    <button id="load">Charger</button>
  </div>
</header>

<div id="status" class="hint"></div>
<div id="error" class="error"></div>

<div id="card" class="card" hidden>
  <div class="label">Sens (anglais)</div>
  <div id="meaning" class="meaning"></div>

  <div id="kanji" class="kanji" lang="ja"></div>
  <div id="readings" class="readings"></div>

  <div class="controls">
    <button id="show">Afficher le kanji</button>
    <button id="success">J‚Äôai r√©ussi ‚úçÔ∏è</button>
    <button id="fail">Je me suis tromp√©</button>
    <button id="next">Suivant ‚ñ∂Ô∏é</button>
  </div>
  <div id="stats" class="stats"></div>
</div>

<details id="diagnostics">
  <summary>üîé Diagnostics (headers & requ√™tes)</summary>
  <div class="diag-grid" id="diag-grid">
    <div>Derni√®re URL :</div><div id="diag-url">‚Äî</div>
    <div>HTTP Status :</div><div id="diag-status">‚Äî</div>
    <div>RateLimit-Limit :</div><div id="diag-limit">‚Äî</div>
    <div>RateLimit-Remaining :</div><div id="diag-remaining">‚Äî</div>
    <div>RateLimit-Reset (epoch s) :</div><div id="diag-reset">‚Äî</div>
    <div>Last-Modified :</div><div id="diag-last">‚Äî</div>
    <div>ETag :</div><div id="diag-etag">‚Äî</div>
  </div>
</details>

<footer class="hint">
  Conseils : dessine sur papier, puis <b>affiche</b> le kanji pour te corriger.
  API : <code>Authorization: Bearer &lt;token&gt;</code> et <code>Wanikani-Revision: 20170710</code>.
</footer>

<!-- Le script complet est identique √† la version V2 fournie pr√©c√©demment -->
<script>
// ... (script complet de la version V2)
</script>
</body>
</html>
